dist:
  name: otelcol
  module: github.com/signalfx/splunk-otel-collector/examples/ocb/cmd/otelcol
  description: OpenTelemetry Collector binary with exported Splunk additions
  version: ${SPLUNK_COLLECTOR_VERSION}
  otelcol_version: ${OTEL_COLLECTOR_VERSION}

extensions:
  - gomod: github.com/signalfx/splunk-otel-collector/pkg/extension/smartagentextension v${PLUGINS_VERSION}

exporters:
  - import: go.opentelemetry.io/collector/exporter/loggingexporter
    gomod: go.opentelemetry.io/collector v${OTEL_COLLECTOR_VERSION}


processors:
  - import: go.opentelemetry.io/collector/processor/batchprocessor
    gomod: go.opentelemetry.io/collector v${OTEL_COLLECTOR_VERSION}
  - gomod: github.com/signalfx/splunk-otel-collector/pkg/processor/timestampprocessor v${PLUGINS_VERSION}

receivers:
  - import: go.opentelemetry.io/collector/receiver/otlpreceiver
    gomod: go.opentelemetry.io/collector v${OTEL_COLLECTOR_VERSION}
  - gomod: github.com/signalfx/splunk-otel-collector/pkg/receiver/smartagentreceiver v${PLUGINS_VERSION}
  - gomod: github.com/signalfx/splunk-otel-collector/pkg/receiver/oracledbreceiver v${PLUGINS_VERSION}

# When adding a replace, add a comment before it to document why it's needed and when it can be removed
replaces:
  # See https://github.com/google/gnostic/issues/262
  - github.com/googleapis/gnostic v0.5.6 => github.com/googleapis/gnostic v0.5.5
  # See https://github.com/open-telemetry/opentelemetry-collector-contrib/pull/12322#issuecomment-1185029670
  - github.com/docker/go-connections v0.4.1-0.20210727194412-58542c764a11 => github.com/docker/go-connections v0.4.0
  # some dependencies attempt to bring something like v1.8.2-0.20220303173753-edfe657b5405, which is older than v0.38.0
  # at the time of this inclusion, v0.38.0 was the latest version available (also tagged as v2.38.0)
  - github.com/prometheus/prometheus => github.com/prometheus/prometheus v0.38.0
  ## from Splunk Otel Collector replaces
  - github.com/influxdata/telegraf => github.com/signalfx/telegraf v0.10.2-0.20210820123244-82265917ca87
  - code.cloudfoundry.org/go-loggregator => github.com/signalfx/go-loggregator v1.0.1-0.20200205155641-5ba5ca92118d
  # checksum is *WRONG* in gosum.lang.org
  - github.com/go-openapi/spec v0.20.5 => github.com/go-openapi/spec v0.20.6
  
